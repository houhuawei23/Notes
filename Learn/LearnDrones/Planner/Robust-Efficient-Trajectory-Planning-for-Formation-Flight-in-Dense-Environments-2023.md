# 密集环境下编队飞行的稳健高效的轨迹规划-2023

Robust and Efficient Trajectory Planning for Formation Flight in Dense Environments

IEEE Transactions on Robotics

[https://arxiv.org/abs/2210.04048](https://arxiv.org/abs/2210.04048)

编队飞行在空中机器人群的各种应用中具有巨大潜力。然而，现有方法缺乏在密集环境中实现完全自主的大规模编队飞行的能力。为了弥补这一差距，我们提出了一个完整的编队飞行系统，该系统能有效地将现实世界的约束条件整合到空中编队导航中。本文提出了一种 可微分的基于图的度量方法 (differentiable graph-based metric)，用于量化编队之间的 整体相似度误差 。该指标不受旋转、平移和缩放的影响，为编队协调提供了更大的自由度。

我们设计了一个 `分布式轨迹优化框架`，该框架考虑了编队相似性、避障和动态可行性。通过将优化过程解耦，使大规模编队飞行在计算上可行。

为了提高编队在高度受限场景中的导航弹性，我们提出了一种 `蜂群重组方法`， 通过生成局部导航目标，自适应地调整编队参数和任务分配 。本研究提出了一种名为 "`全局重映射-局部重规划` "（global-remap-local-replan）的 `新型蜂群协议策略`，并提出了一个 `编队级路径规划器`，以协调全局规划和局部轨迹优化。

为了验证所提出的方法，我们从适应性、可预测性、弹性、复原力和效率等方面设计了综合基准，并与其他前沿工作进行了模拟。最后，通过与带有机载计算机和传感器的手掌大小的蜂群平台集成，我们提出的方法在密集的室外环境中实现了最大规模的编队飞行，证明了它的高效性和鲁棒性。

空中群聚、编队飞行、避障、运动规划、分布式轨迹优化。

尽管大量的研究工作集中在编队飞行导航上，但在充满障碍物的区域中实现稳健的编队飞行的研究还很少。实际应用中存在三个核心挑战：

（a）编队维持与障碍物避免之间的固有冲突是不可避免且难以缓解的。

（b）预定义编队在受限环境中缺乏弹性适应能力。

（c）由于未知障碍物或期望编队形状的突然变化而导致的无序状态，群体系统难以迅速恢复。

基于上述挑战，我们得出结论，理想的编队飞行系统应具备在避免障碍物的同时维持编队的能力，根据受限环境调整群体编队分布，并在紧急情况下快速重组编队的能力。 这些特征被概括为 PAPER 准则：

- `Portability 移动性` ：空中机器人集群应由轻型平台、可扩展系统和分布式架构组成。 可扩展系统意味着主要组件（如估计、决策、规划和控制模块）在每个机器人上都是相同的。 分布式架构能够天然地抵御个体硬件故障。 这是实现大规模编队飞行的基础。
- `Adaptability 适应性`：当面临障碍时，机器人应当在局部适应其轨迹，以避免碰撞，并尽量减少对整体编队性能的影响。这种能力可以缓解编队维持和障碍物避让之间的冲突。
- `Predictability 可预测性`：反应式的局部反馈方法的视野短浅，无法提前考虑到约束条件。机器人应该在预测的时间范围内优化运动，使得形成能够对其周围未来环境的变化做出平稳响应，这对于密集区域是必要的。
- `Elasticity 弹性`：在受限环境中，如狭窄的走廊或洞穴中，可能不存在适用于固定编队形状的可行且安全的路径。因此，群体机器人需要通过调整编队分布（如形状的规模或任务分配）来具备弹性和灵活的变形能力，同时保持编队的完全操纵性。
- `Resilience 可恢复性`：编队飞行可能会遇到由未知障碍物或者期望编队形状的突然改变引发的不利情况。导航系统应具备弹性重新组织和引导整个编队的能力，以使飞行能够及时从无序状态中恢复。

一个完整的编队飞行系统应满足上述 PAPER 标准，并确保每个标准的条件与其他条件相容。

我们之前的工作\cite{quan2022formation}只部分满足了\textit{PAPER}标准的前三个条款。 我们将编队飞行问题作为一种 `耦合的协同轨迹优化问题`来解决，主要适用于小规模编队场景。 然而，使用基于图的相似度度量解决编队的协作约束计算量较大，导致每次优化迭代过程中的开销增加。 此外，将动态的机器人间关系集成到耦合轨迹优化问题中会显著影响优化过程的效率，使其在更大规模的编队或更复杂的场景中不太适用。

在本文中，我们提出了一个完整的编队飞行系统，满足所有\textit{PAPER}标准。 为解决[4]中的挑战，我们引入了一种 解耦的编队优化方法 ，以显著提高计算效率。 该方法包括两个组成部分。

首先，预先计算 最优编队位置序列 ，避免了优化过程中重复的度量计算。

其次，采用固定时间间隔采样方法将动态的机器人间关系转化为 `静态约束`，极大地降低了优化问题的复杂性。 这些改进使得我们的方法适用于大规模的群体。

此外，之前的方法缺乏重新组织群体编队的能力，在恶劣条件下，特别是当初始位置或任务分配不当时，可能导致编队飞行无序。 为解决这个问题，我们提出了一种 `群体重新组织方法`，可以通过优化编队参数和任务分配来弹性地调整编队分布，以响应外部约束。

随后，我们提出了一种 `群体一致性策略`，称为 `全局重映射-局部重新规划`，该策略可使群体重新组织的结果得到快速实施，从而在群体智能体之间实现共识。

此外，还设计了一种以编队为整体的 `全局路径规划方法`，用于引导群体走出障碍物的死锁。

最后，我们将估计、建图、决策、规划和控制模块整合到了带有机载计算机和传感器的手掌大小编队平台中 Micro Flying Robots-21，实现了在密集环境中的大规模编队飞行。 具体贡献如下。

我们引入了一种 最优 `形成位置序列` （formation position sequence），该序列是使用可微的基于图的度量方法预先计算得出的~\cite{quan2022formation}。这个序列代表了具有最低相似度误差的最优位置，减少了优化过程中重复计算的需求。

我们设计了一个 `解耦的空间-时间轨迹优化框架`，有效处理动态的机器人之间的关系、避障和动态可行性。 与我们之前的研究成果~\cite{quan2022formation}相比，我们在大规模群体中实现了更高的计算效率。

我们提出了一种群集重新组织方法，实现群集分布的弹性变形，同时解决最佳形态对齐和任务分配问题（简称 ALAS）。该方法提高了群集形成对受限环境的弹性。它减轻了对适当的形态对齐和任务分配的依赖。
